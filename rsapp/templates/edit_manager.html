{% extends 'base.html' %}

{% block content %}
<style>
    .bg-grey {
        background-color: #ffffff;
        border-radius: 10px;
        padding: 20px;
        margin-bottom: 20px;
    }

    .row {
        display: flex;
        align-items: flex-start;
    }

    .errorlist {
        display: none;
        color: red;
    }
</style>

<div class="container">
    <h2 class="my-4">
        {% if employee_form.instance.pk %}
            Редактирование менеджера
        {% else %}
            Добавление менеджера
        {% endif %}
    </h2>
    <div class="row">
        <div class="col-md-6 bg-grey">
            <form method="post" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="mb-3">
                    {{ employee_form.surname.label_tag }}
                    {{ employee_form.surname }}
                </div>
                <div class="mb-3">
                    {{ employee_form.name.label_tag }}
                    {{ employee_form.name }}
                </div>
                <div class="mb-3">
                    {{ employee_form.middlename.label_tag }}
                    {{ employee_form.middlename }}
                </div>
                <div class="mb-3">
                    {{ employee_form.phone_number.label_tag }}
                    {{ employee_form.phone_number }}
                </div>
                <div class="mb-3">
                    {{ employee_form.photo.label_tag }}
                    {{ employee_form.photo }}
                </div>
                <div class="mb-3">
                    {{ user_form.username.label_tag }}
                    {{ user_form.username }}
                </div>                           
                <div class="mb-3">
                    {{ user_form.password1.label_tag }}
                    {{ user_form.password1 }}
                </div>
                <div class="mb-3">
                    {{ user_form.password2.label_tag }}
                    {{ user_form.password2 }}
                </div>
                <button type="submit" class="btn btn-success btn-sm">Сохранить</button>
            </form>
        </div>
    </div>
</div>

<script>
    // Скрыть сообщения об ошибках по умолчанию
    document.addEventListener("DOMContentLoaded", function() {
        var passwordErrors = document.querySelectorAll(".errorlist");
        passwordErrors.forEach(function(error) {
            error.style.display = 'none';
        });

        // Показать сообщения об ошибках при неправильном вводе пароля
        var password1 = document.getElementById("id_password1");
        var password2 = document.getElementById("id_password2");

        password1.addEventListener("input", function() {
            passwordErrors.forEach(function(error) {
                error.style.display = 'block';
            });
        });

        password2.addEventListener("input", function() {
            passwordErrors.forEach(function(error) {
                error.style.display = 'block';
            });
        });
    });
</script>
{% endblock %}
